#!/usr/bin/env sh
if [ "${HUSKY:-1}" = "0" ]; then
  exit 0
fi

set -e

commit_cmd=$(ps -o args= -p "$PPID" 2>/dev/null || echo "")
if printf '%s' "$commit_cmd" | grep -qiE "-m[[:space:]]*['\"]?wip:"; then
  echo "husky: skipping pre-commit for WIP commit"
  exit 0
fi

pnpm lint-staged
